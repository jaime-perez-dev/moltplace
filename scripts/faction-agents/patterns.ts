// Pixel art patterns for each faction
// Each pattern is a 2D array where 1 = primary color, 2 = secondary, 0 = skip

// ============ PIXEL ART LETTERS ============
const LETTERS: Record<string, number[][]> = {
  V: [
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [0,1,0,1,0],
    [0,0,1,0,0],
  ],
  I: [
    [1,1,1],
    [0,1,0],
    [0,1,0],
    [0,1,0],
    [1,1,1],
  ],
  B: [
    [1,1,1,0],
    [1,0,0,1],
    [1,1,1,0],
    [1,0,0,1],
    [1,1,1,0],
  ],
  E: [
    [1,1,1,1],
    [1,0,0,0],
    [1,1,1,0],
    [1,0,0,0],
    [1,1,1,1],
  ],
  D: [
    [1,1,1,0],
    [1,0,0,1],
    [1,0,0,1],
    [1,0,0,1],
    [1,1,1,0],
  ],
  R: [
    [1,1,1,0],
    [1,0,0,1],
    [1,1,1,0],
    [1,0,1,0],
    [1,0,0,1],
  ],
  A: [
    [0,1,1,0],
    [1,0,0,1],
    [1,1,1,1],
    [1,0,0,1],
    [1,0,0,1],
  ],
  W: [
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,1,0,1],
    [1,1,0,1,1],
    [1,0,0,0,1],
  ],
  N: [
    [1,0,0,1],
    [1,1,0,1],
    [1,0,1,1],
    [1,0,0,1],
    [1,0,0,1],
  ],
  G: [
    [0,1,1,1],
    [1,0,0,0],
    [1,0,1,1],
    [1,0,0,1],
    [0,1,1,0],
  ],
};

// Helper to create text as pixel pattern
function textToPattern(text: string, spacing: number = 1): number[][] {
  const chars = text.toUpperCase().split('');
  const charPatterns = chars.map(c => LETTERS[c] || [[0]]);
  
  if (charPatterns.length === 0) return [[1]];
  
  const height = Math.max(...charPatterns.map(p => p.length));
  const totalWidth = charPatterns.reduce((sum, p) => sum + (p[0]?.length || 0), 0) + (chars.length - 1) * spacing;
  
  const result: number[][] = Array(height).fill(null).map(() => Array(totalWidth).fill(0));
  
  let x = 0;
  for (const pattern of charPatterns) {
    for (let y = 0; y < pattern.length; y++) {
      for (let px = 0; px < pattern[y].length; px++) {
        if (result[y]) result[y][x + px] = pattern[y][px];
      }
    }
    x += (pattern[0]?.length || 0) + spacing;
  }
  
  return result;
}

export const PATTERNS = {
  "vibe-coders": {
    // "VIBE" text
    vibe: textToPattern("VIBE", 1),
    
    // Heart (8x7)
    heart: [
      [0,1,1,0,0,1,1,0],
      [1,2,2,1,1,2,2,1],
      [1,2,2,2,2,2,2,1],
      [1,2,2,2,2,2,2,1],
      [0,1,2,2,2,2,1,0],
      [0,0,1,2,2,1,0,0],
      [0,0,0,1,1,0,0,0],
    ],
    
    // Sparkle/star (7x7)
    sparkle: [
      [0,0,0,1,0,0,0],
      [0,0,0,1,0,0,0],
      [0,0,2,1,2,0,0],
      [1,1,1,2,1,1,1],
      [0,0,2,1,2,0,0],
      [0,0,0,1,0,0,0],
      [0,0,0,1,0,0,0],
    ],
    
    // Cloud (10x5)
    cloud: [
      [0,0,1,1,1,0,0,0,0,0],
      [0,1,2,2,2,1,1,1,0,0],
      [1,2,2,2,2,2,2,2,1,0],
      [1,2,2,2,2,2,2,2,2,1],
      [0,1,1,1,1,1,1,1,1,0],
    ],
    
    // Rainbow arc (12x6)
    rainbow: [
      [0,0,0,1,1,1,1,1,1,0,0,0],
      [0,0,1,1,1,1,1,1,1,1,0,0],
      [0,1,1,0,0,0,0,0,0,1,1,0],
      [0,2,0,0,0,0,0,0,0,0,2,0],
      [2,2,0,0,0,0,0,0,0,0,2,2],
    ],
    
    // Sunset gradient block (8x8)
    sunset: [
      [1,1,1,1,1,1,1,1],
      [1,1,1,1,1,1,1,1],
      [2,2,2,2,2,2,2,2],
      [2,2,2,2,2,2,2,2],
      [1,1,1,1,1,1,1,1],
      [2,2,2,2,2,2,2,2],
      [1,1,1,1,1,1,1,1],
      [2,2,2,2,2,2,2,2],
    ],
  },

  "devs": {
    // GitHub Octocat simplified (12x12)
    octocat: [
      [0,0,0,1,1,1,1,1,1,0,0,0],
      [0,0,1,1,1,1,1,1,1,1,0,0],
      [0,1,1,1,1,1,1,1,1,1,1,0],
      [0,1,1,2,2,1,1,2,2,1,1,0],
      [0,1,1,2,2,1,1,2,2,1,1,0],
      [0,1,1,1,1,1,1,1,1,1,1,0],
      [0,0,1,1,1,1,1,1,1,1,0,0],
      [0,0,0,1,1,1,1,1,1,0,0,0],
      [0,1,1,1,0,0,0,0,1,1,1,0],
      [1,1,0,1,0,0,0,0,1,0,1,1],
      [1,0,0,1,1,1,1,1,1,0,0,1],
      [0,0,0,0,1,1,1,1,0,0,0,0],
    ],
    
    // Rust crab (14x10)
    rustCrab: [
      [0,1,0,0,0,0,0,0,0,0,0,0,1,0],
      [0,0,1,0,0,0,0,0,0,0,0,1,0,0],
      [0,0,0,1,1,1,1,1,1,1,1,0,0,0],
      [0,0,1,1,2,1,1,1,1,2,1,1,0,0],
      [0,1,1,1,1,1,1,1,1,1,1,1,1,0],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,0,1,1,1,1,1,1,1,1,1,1,0,1],
      [0,0,0,1,1,1,1,1,1,1,1,0,0,0],
      [0,0,1,1,0,0,0,0,0,0,1,1,0,0],
      [0,1,1,0,0,0,0,0,0,0,0,1,1,0],
    ],
    
    // Linux Tux (10x12)
    tux: [
      [0,0,0,1,1,1,1,0,0,0],
      [0,0,1,1,1,1,1,1,0,0],
      [0,1,1,2,1,1,2,1,1,0],
      [0,1,1,1,1,1,1,1,1,0],
      [0,1,1,1,2,2,1,1,1,0],
      [0,0,1,1,1,1,1,1,0,0],
      [0,0,0,1,1,1,1,0,0,0],
      [0,0,1,1,1,1,1,1,0,0],
      [0,1,1,1,1,1,1,1,1,0],
      [0,1,1,0,0,0,0,1,1,0],
      [1,1,1,0,0,0,0,1,1,1],
      [1,1,0,0,0,0,0,0,1,1],
    ],
    
    // Curly braces { } (10x11)
    braces: [
      [0,0,1,1,0,0,1,1,0,0],
      [0,1,1,0,0,0,0,1,1,0],
      [0,1,0,0,0,0,0,0,1,0],
      [0,1,0,0,0,0,0,0,1,0],
      [1,1,0,0,0,0,0,0,1,1],
      [1,0,0,0,0,0,0,0,0,1],
      [1,1,0,0,0,0,0,0,1,1],
      [0,1,0,0,0,0,0,0,1,0],
      [0,1,0,0,0,0,0,0,1,0],
      [0,1,1,0,0,0,0,1,1,0],
      [0,0,1,1,0,0,1,1,0,0],
    ],
    
    // Hash # (7x7)
    hash: [
      [0,1,0,0,1,0,0],
      [0,1,0,0,1,0,0],
      [1,1,1,1,1,1,1],
      [0,1,0,0,1,0,0],
      [1,1,1,1,1,1,1],
      [0,1,0,0,1,0,0],
      [0,1,0,0,1,0,0],
    ],
  },

  "accels": {
    // OpenAI spiral simplified (12x12)
    openai: [
      [0,0,0,0,1,1,1,1,0,0,0,0],
      [0,0,1,1,1,0,0,1,1,1,0,0],
      [0,1,1,0,0,0,0,0,0,1,1,0],
      [0,1,0,0,0,1,1,0,0,0,1,0],
      [1,1,0,0,1,1,1,1,0,0,1,1],
      [1,0,0,1,1,0,0,1,1,0,0,1],
      [1,0,0,1,1,0,0,1,1,0,0,1],
      [1,1,0,0,1,1,1,1,0,0,1,1],
      [0,1,0,0,0,1,1,0,0,0,1,0],
      [0,1,1,0,0,0,0,0,0,1,1,0],
      [0,0,1,1,1,0,0,1,1,1,0,0],
      [0,0,0,0,1,1,1,1,0,0,0,0],
    ],
    
    // Tesla T (8x10)
    tesla: [
      [1,1,1,1,1,1,1,1],
      [1,1,1,1,1,1,1,1],
      [0,0,0,1,1,0,0,0],
      [0,0,0,1,1,0,0,0],
      [0,0,0,1,1,0,0,0],
      [0,0,0,1,1,0,0,0],
      [0,0,0,1,1,0,0,0],
      [0,0,0,1,1,0,0,0],
      [0,0,0,1,1,0,0,0],
      [0,0,0,1,1,0,0,0],
    ],
    
    // Rocket (8x14)
    rocket: [
      [0,0,0,1,1,0,0,0],
      [0,0,1,1,1,1,0,0],
      [0,0,1,2,2,1,0,0],
      [0,1,1,2,2,1,1,0],
      [0,1,1,1,1,1,1,0],
      [0,1,1,1,1,1,1,0],
      [0,1,1,1,1,1,1,0],
      [0,1,1,1,1,1,1,0],
      [1,1,1,1,1,1,1,1],
      [1,0,1,1,1,1,0,1],
      [1,0,1,1,1,1,0,1],
      [0,0,0,2,2,0,0,0],
      [0,0,2,2,2,2,0,0],
      [0,0,0,2,2,0,0,0],
    ],
    
    // Lightning bolt (6x12)
    lightning: [
      [0,0,0,0,1,1],
      [0,0,0,1,1,1],
      [0,0,1,1,1,0],
      [0,1,1,1,0,0],
      [1,1,1,1,1,1],
      [1,1,1,1,1,0],
      [0,0,1,1,0,0],
      [0,1,1,0,0,0],
      [1,1,0,0,0,0],
      [1,0,0,0,0,0],
    ],
    
    // Up arrow (8x12)
    arrow: [
      [0,0,0,1,1,0,0,0],
      [0,0,1,1,1,1,0,0],
      [0,1,1,1,1,1,1,0],
      [1,1,1,1,1,1,1,1],
      [0,0,0,1,1,0,0,0],
      [0,0,0,1,1,0,0,0],
      [0,0,0,1,1,0,0,0],
      [0,0,0,1,1,0,0,0],
      [0,0,0,1,1,0,0,0],
      [0,0,0,1,1,0,0,0],
    ],
  },

  "degens": {
    // Doge face (14x12)
    doge: [
      [0,0,1,1,1,0,0,0,0,1,1,1,0,0],
      [0,1,1,1,1,1,0,0,1,1,1,1,1,0],
      [0,1,1,1,1,1,1,1,1,1,1,1,1,0],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,1,1,2,2,1,1,1,1,2,2,1,1,1],
      [1,1,1,2,2,1,1,1,1,2,2,1,1,1],
      [1,1,1,1,1,1,2,2,1,1,1,1,1,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [0,1,1,1,1,1,1,1,1,1,1,1,1,0],
      [0,0,1,1,1,1,1,1,1,1,1,1,0,0],
      [0,0,0,1,1,1,1,1,1,1,1,0,0,0],
      [0,0,0,0,1,1,1,1,1,1,0,0,0,0],
    ],
    
    // Solana S (10x12)
    solana: [
      [1,1,1,1,1,1,1,1,1,1],
      [1,1,0,0,0,0,0,0,0,0],
      [1,1,1,1,1,1,1,1,1,1],
      [0,0,0,0,0,0,0,0,1,1],
      [1,1,1,1,1,1,1,1,1,1],
      [1,1,0,0,0,0,0,0,0,0],
      [1,1,1,1,1,1,1,1,1,1],
      [0,0,0,0,0,0,0,0,1,1],
      [1,1,1,1,1,1,1,1,1,1],
    ],
    
    // Diamond (10x12)
    diamond: [
      [0,0,0,0,1,1,0,0,0,0],
      [0,0,0,1,2,2,1,0,0,0],
      [0,0,1,2,2,2,2,1,0,0],
      [0,1,2,2,2,2,2,2,1,0],
      [1,2,2,2,2,2,2,2,2,1],
      [1,2,2,2,2,2,2,2,2,1],
      [0,1,2,2,2,2,2,2,1,0],
      [0,0,1,2,2,2,2,1,0,0],
      [0,0,0,1,2,2,1,0,0,0],
      [0,0,0,0,1,1,0,0,0,0],
    ],
    
    // Moon (10x10)
    moon: [
      [0,0,0,1,1,1,1,0,0,0],
      [0,0,1,1,1,1,0,0,0,0],
      [0,1,1,1,1,0,0,0,0,0],
      [0,1,1,1,0,0,0,0,0,0],
      [1,1,1,1,0,0,0,0,0,0],
      [1,1,1,1,0,0,0,0,0,0],
      [0,1,1,1,0,0,0,0,0,0],
      [0,1,1,1,1,0,0,0,0,0],
      [0,0,1,1,1,1,0,0,0,0],
      [0,0,0,1,1,1,1,0,0,0],
    ],
    
    // Pepe frog simplified (12x10)
    pepe: [
      [0,0,1,1,1,1,1,1,1,1,0,0],
      [0,1,1,1,1,1,1,1,1,1,1,0],
      [1,1,2,2,1,1,1,1,2,2,1,1],
      [1,1,2,2,1,1,1,1,2,2,1,1],
      [1,1,1,1,1,1,1,1,1,1,1,1],
      [1,1,1,1,1,1,1,1,1,1,1,1],
      [0,1,1,1,1,1,1,1,1,1,1,0],
      [0,0,1,1,0,0,0,0,1,1,0,0],
      [0,0,1,1,0,0,0,0,1,1,0,0],
    ],
    
    // Rocket mini (6x10)
    rocketMini: [
      [0,0,1,1,0,0],
      [0,1,2,2,1,0],
      [0,1,1,1,1,0],
      [0,1,1,1,1,0],
      [0,1,1,1,1,0],
      [1,1,1,1,1,1],
      [1,0,2,2,0,1],
      [0,0,2,2,0,0],
    ],
  },
};

// Get a random pattern for a faction
export function getRandomPattern(factionSlug: string): { name: string; pattern: number[][] } {
  const factionPatterns = PATTERNS[factionSlug as keyof typeof PATTERNS];
  if (!factionPatterns) return { name: "block", pattern: [[1,1],[1,1]] };
  
  const names = Object.keys(factionPatterns);
  const name = names[Math.floor(Math.random() * names.length)];
  return { name, pattern: factionPatterns[name as keyof typeof factionPatterns] };
}

// Get specific pattern by name
export function getPattern(factionSlug: string, patternName: string): number[][] | null {
  const factionPatterns = PATTERNS[factionSlug as keyof typeof PATTERNS];
  if (!factionPatterns) return null;
  return factionPatterns[patternName as keyof typeof factionPatterns] || null;
}
